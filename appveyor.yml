image: Visual Studio 2017 RC

sn -Vr NuGet.Build.Tasks.Pack,31bf3856ad364e35
sn -Vr NuGet.Commands,31bf3856ad364e35

version: 1.0.{build}
configuration: Release
before_build:
- ps: >-
    dotnet --version
    dotnet restore
build:
  verbosity: minimal
  
after_build:
- dotnet publish C:\projects\myserver\src\Web\MyServer.Web\project.json -o C:\projects\myserver\AppOutput\DeployTest --configuration Release

test: off

artifacts:
- path: AppOutput\DeployTest
  name: DeployTest
  type: WebDeployPackage
  
deploy:
- provider: WebDeploy
  server: atanas.it
  website: MyServer
  username: Administrator
  password: 
    secure: rE55/DZDA+/y1TX0DnrRSQ==
  ntlm: true
  do_not_use_checksum: true
  aspnet_core: true
  aspnet_core_force_restart: true
  artifact: DeployTest
  app_offline: true
  skip_files: web.config
  
- provider: WebDeploy
  server: atanas.it
  website: MyServerDebug
  username: Administrator
  password: 
    secure: rE55/DZDA+/y1TX0DnrRSQ==
  ntlm: true
  do_not_use_checksum: true
  aspnet_core: true
  aspnet_core_force_restart: true
  artifact: DeployTest
  app_offline: true
  skip_files: web.config
