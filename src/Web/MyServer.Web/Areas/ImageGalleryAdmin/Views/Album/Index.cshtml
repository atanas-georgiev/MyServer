@using MyServer.Web.Areas.ImageGalleryAdmin.Models.Album
@model IEnumerable<MyServer.Web.Areas.ImageGalleryAdmin.Models.Album.AlbumListViewModel>

@{
    ViewData["Title"] = LocString["Albums"];
}

<div class="container well well-main well-mobile">
    <div>
        <h1 class="text-center">@LocString["Albums"]</h1>
        <hr/>
    </div>
    <div>
        <a asp-action="@nameof(AlbumController.Create)" class="btn btn-default">@LocString["Create"]</a>
        <div id="mygallery" class="overlay-album">
            @foreach (var album in Model)
            {
                <a class="overlay-album-link" asp-action="@nameof(AlbumController.Edit)" asp-route-id="@album.Id">
                    <img class="overlay-album-image" alt="@album.Title" src='@album.CoverImage'/>
                    <div class="overlay-album-caption">
                        <h1 class="overlay-album-title">@album.Title</h1>
                        <p class="overlay-album-content">
                            <i class="fa fa-calendar" aria-hidden="true"></i> @album.Date<br/>
                            <i class="fa fa-file-image-o" aria-hidden="true"></i> @album.ImagesCountCover
                        </p>
                    </div>
                </a>
            }
        </div>
    </div>
</div>

<script>
    $(document)
        .ready(function() {
            $("#mygallery")
                .justifiedGallery({
                    rowHeight: 300,
                    maxRowHeight: 400,
                    fixedHeight: false,
                    margins: 2,
                    lastRow: 'nojustify',
                    captions: false,
                    border: 0,
                    thumbnailPath: function(currentPath, width, height) {
                        if (Math.max(width, height) > 300) {
                            return currentPath.replace(/(.*)(_[a-z]+)(\..*)/, "$1Low$2");
                        } else {
                            return currentPath.replace(/(.*)(_[a-z]+)(\..*)/, "$1Medium$2");
                        }
                    }
                });
        });
</script>
