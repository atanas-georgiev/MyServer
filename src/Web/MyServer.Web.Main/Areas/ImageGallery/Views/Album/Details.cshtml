@using MyServer.Web.Main.Areas.ImageGallery.Controllers.Album
@using Newtonsoft.Json
@model MyServer.Web.Main.Areas.ImageGallery.Models.Album.AlbumViewModel

<h2>@Model.Title</h2>
<hr />
<div class="row">

    <div class="overlay-album mygallery lightgallery">
        @foreach (var image in Model.Images)
        {
            <a href='@image.MiddleImageSource' data-download-url="@image.OriginalDownloadPath">
                <img alt="@image.Info" src='@image.LowImageSource'/>
            </a>
        }
    </div>
</div>

<script>
    $(document).ready(function () {
        $('.mygallery').lightGallery({
            speed: 400,
            hideBarsDelay: 2000,
            controls: false,
            thumbnail: false,
            pause: 3000
        }); 

        $(".mygallery").justifiedGallery({
            rowHeight: 200,
            maxRowHeight: 2000,
            fixedHeight: false,
            margins: 3,
            lastRow: 'nojustify',
            captions: false,
            border: 0,
            thumbnailPath: function (currentPath, width, height) {
                if (Math.max(width, height) < 200) {
                    return currentPath.replace(/(.*)(_[a-z]+)(\..*)/, "$1low$2");
                } else {
                    return currentPath.replace(/(.*)(_[a-z]+)(\..*)/, "$1medium$2");
                }
            }

        });
    });
</script>
